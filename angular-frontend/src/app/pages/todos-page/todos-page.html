<div class="app-wrapper">

    <div class="header">
        <h1 class="text-4xl font-bold text-center">My Todo List.</h1>
        <p-floatlabel variant="in">
            <input style="width: 150px;" (input)="searchById.next($event.target.value)" aria-label="Filter by todo id" pInputText id="todo-id" type="text"
                autocomplete="off" />
            <label for="todo-id">Filter by id</label>
        </p-floatlabel>
    </div>

    <div class="card">
        <p-table aria-label="List of Todos" (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
            [value]="todos()" [(selection)]="selectedTodos" dataKey="id">
            <ng-template #header>
                <tr>
                    <th style="width: 5%"></th>
                    <th style="width: 10%">Id</th>
                    <th style="width: 30%">Title</th>
                    <th style="text-align: right; width: 30%;">Actions</th>
                </tr>
            </ng-template>
            <ng-template #body let-item>
                <tr>
                    <td style="width: 5%">
                        <p-tableCheckbox
                            [ariaLabel]="item.status == 'CLOSED' ? `Mark '${item.title}' todo as Open` : `Mark '${item.title}' todo as Closed`"
                            [value]="item" />
                    </td>
                    <td style="width: 10%">{{item.id}}</td>
                    <td style="width: 30%" [ngClass]="{'todo-closed': item.status == 'CLOSED'}">{{item.title}}</td>
                    <td style="width: 30%;">
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <p-button [ariaLabel]="`Delete '${item.title}' todo`" (onClick)="deleteTodo(item)" text
                                severity="danger" icon="pi pi-trash" label="Delete"></p-button>
                            <p-button [ariaLabel]="`Show details of '${item.title}'`" (onClick)="previewTodo(item)" text
                                icon="pi pi-info-circle" label="Details"></p-button>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    <app-add-todo-form></app-add-todo-form>
    <router-outlet></router-outlet>
</div>